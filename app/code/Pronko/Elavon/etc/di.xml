<?xml version="1.0"?>
<!--
/**
 * Copyright Â© Pronko Consulting
 * See LICENSE for license details.
 */
 -->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <preference for="Pronko\Elavon\Spi\ConfigInterface" type="Pronko\Elavon\Gateway\Config" />
    <preference for="Pronko\Elavon\Spi\FraudConfigInterface" type="Pronko\Elavon\Gateway\Config\FraudConfig"/>

    <preference for="Pronko\Elavon\Api\SettlementRepositoryInterface" type="Pronko\Elavon\Model\Report\SettlementRepository" />
    <type name="Pronko\Elavon\Gateway\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Pronko\Elavon\Spi\ConfigInterface::METHOD_CODE</argument>
        </arguments>
    </type>
    <type name="Pronko\Elavon\Gateway\Config\FraudConfig">
        <arguments>
            <argument name="methodCode" xsi:type="const">Pronko\Elavon\Spi\ConfigInterface::METHOD_CODE</argument>
        </arguments>
    </type>
    <type name="Pronko\Elavon\Gateway\Converter\CardType">
        <arguments>
            <argument name="types" xsi:type="array">
                <item name="VI" xsi:type="string">VISA</item>
                <item name="MC" xsi:type="string">MC</item>
                <item name="MI" xsi:type="string">MC</item>
                <item name="AE" xsi:type="string">AMEX</item>
                <item name="DN" xsi:type="string">DINERS</item>
            </argument>
        </arguments>
    </type>
    <virtualType name="Pronko\Elavon\Logger\Monolog" type="Magento\Framework\Logger\Monolog">
        <arguments>
            <argument name="handlers"  xsi:type="array">
                <item name="debug" xsi:type="object">Pronko\Elavon\Gateway\Logger\Debug</item>
            </argument>
        </arguments>
    </virtualType>

    <!-- Refund Command -->
    <virtualType name="Pronko\Elavon\Gateway\Command\RefundCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">
        <arguments>
            <argument name="requestBuilder" xsi:type="object">Pronko\Elavon\Gateway\Request\RefundBuilder</argument>
            <argument name="transferFactory" xsi:type="object">Pronko\Elavon\Gateway\Http\TransferFactory</argument>
            <argument name="client" xsi:type="object">Pronko\Elavon\Gateway\Http\Client</argument>
            <argument name="validator" xsi:type="object">Pronko\Elavon\Gateway\Response\Validator\General</argument>
            <argument name="handler" xsi:type="object">Pronko\Elavon\Gateway\Response\RefundHandlerChain</argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\Gateway\Request\RefundBuilder" type="Pronko\Elavon\Gateway\Request\RequestBuilder">
        <arguments>
            <argument name="builderComposite" xsi:type="object">Pronko\Elavon\Gateway\Request\RefundBuilderComposite</argument>
            <argument name="type" xsi:type="string">rebate</argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\Gateway\Request\RefundBuilderComposite" type="Magento\Payment\Gateway\Request\BuilderComposite">
        <arguments>
            <argument name="builders" xsi:type="array">
                <item name="common" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\CommonBuilder</item>
                <item name="amount" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\AmountBuilder</item>
                <item name="refund_transaction" xsi:type="string">Pronko\Elavon\Gateway\Request\Refund\TransactionBuilder</item>
                <item name="refund_hash" xsi:type="string">Pronko\Elavon\Gateway\Request\Refund\HashBuilder</item>
                <item name="comments" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\CommentsBuilder</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\Gateway\Response\RefundHandlerChain" type="Magento\Payment\Gateway\Response\HandlerChain">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="additional_transaction_info" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\AdditionalInfoHandler</item>
                <item name="refund_transaction" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\RefundHandler</item>
                <item name="transaction_report" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\TransactionReportHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <!-- Gateway Commands -->
    <virtualType name="Pronko\Elavon\Gateway\Command\SettleCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">
        <arguments>
            <argument name="requestBuilder" xsi:type="object">elavonSettleBuilder</argument>
            <argument name="transferFactory" xsi:type="object">Pronko\Elavon\Gateway\Http\TransferFactory</argument>
            <argument name="client" xsi:type="object">Pronko\Elavon\Gateway\Http\Client</argument>
            <argument name="validator" xsi:type="object">Pronko\Elavon\Gateway\Response\Validator\General</argument>
            <argument name="handler" xsi:type="object">Pronko\Elavon\Gateway\Response\SettleHandlerChain</argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\Gateway\Request\SettleRequestBuilder" type="Pronko\Elavon\Gateway\Request\RequestBuilder">
        <arguments>
            <argument name="builderComposite" xsi:type="object">Pronko\Elavon\Gateway\Request\SettleComposite</argument>
            <argument name="type" xsi:type="string">settle</argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\Gateway\Request\SettleComposite" type="Magento\Payment\Gateway\Request\BuilderComposite">
        <arguments>
            <argument name="builders" xsi:type="array">
                <item name="common" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\CommonBuilder</item>
                <item name="order_id" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\OrderIdBuilder</item>
                <item name="amount" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\AmountBuilder</item>
                <item name="transaction" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\TransactionBuilder</item>
                <item name="hash" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\HashBuilder</item>
                <item name="comments" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\CommentsBuilder</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\Gateway\Response\SettleHandlerChain" type="Magento\Payment\Gateway\Response\HandlerChain">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="settle_transaction" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\SettleHandler</item>
                <item name="transaction" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\AdditionalInfoHandler</item>
                <item name="transaction_report" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\TransactionReportHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <!-- Multi settle command -->
    <virtualType name="Pronko\Elavon\Gateway\Command\MultiSettleCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">
        <arguments>
            <argument name="requestBuilder" xsi:type="object">Pronko\Elavon\Gateway\Request\MultiSettleRequestBuilder</argument>
            <argument name="transferFactory" xsi:type="object">Pronko\Elavon\Gateway\Http\TransferFactory</argument>
            <argument name="client" xsi:type="object">Pronko\Elavon\Gateway\Http\Client</argument>
            <argument name="validator" xsi:type="object">Pronko\Elavon\Gateway\Response\Validator\General</argument>
            <argument name="handler" xsi:type="object">Pronko\Elavon\Gateway\Response\SettleHandlerChain</argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\Gateway\Request\MultiSettleRequestBuilder" type="Pronko\Elavon\Gateway\Request\RequestBuilder">
        <arguments>
            <argument name="builderComposite" xsi:type="object">Pronko\Elavon\Gateway\Request\MultiSettleComposite</argument>
            <argument name="type" xsi:type="string">multisettle</argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\Gateway\Request\MultiSettleComposite" type="Magento\Payment\Gateway\Request\BuilderComposite">
        <arguments>
            <argument name="builders" xsi:type="array">
                <item name="common" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\CommonBuilder</item>
                <item name="order_id" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\OrderIdBuilder</item>
                <item name="amount" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\AmountBuilder</item>
                <item name="refund_transaction" xsi:type="string">Pronko\Elavon\Gateway\Request\Refund\TransactionBuilder</item>
                <item name="hash" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\HashBuilder</item>
                <item name="comments" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\CommentsBuilder</item>
            </argument>
        </arguments>
    </virtualType>

    <!-- Capture command -->
    <virtualType name="Pronko\Elavon\Gateway\Command\CaptureCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">
        <arguments>
            <argument name="requestBuilder" xsi:type="object">Pronko\Elavon\Gateway\Request\CaptureStrategyBuilder</argument>
            <argument name="transferFactory" xsi:type="object">Pronko\Elavon\Gateway\Http\TransferFactory</argument>
            <argument name="client" xsi:type="object">Pronko\Elavon\Gateway\Http\Client</argument>
            <argument name="validator" xsi:type="object">Pronko\Elavon\Gateway\Response\Validator\General</argument>
            <argument name="handler" xsi:type="object">Pronko\Elavon\Gateway\Response\CaptureHandlerChain</argument>
        </arguments>
    </virtualType>
    <type name="Pronko\Elavon\Gateway\Command\CaptureStrategyCommand">
        <arguments>
            <argument name="commandPool" xsi:type="object">Pronko\Elavon\Gateway\Command\CommandPool</argument>
        </arguments>
    </type>
    <virtualType name="Pronko\Elavon\Gateway\Request\Builder\CaptureComposite" type="Magento\Payment\Gateway\Request\BuilderComposite">
        <arguments>
            <argument name="builders" xsi:type="array">
                <item name="hash" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\HashBuilder</item>
                <item name="fraud" xsi:type="string">Pronko\Elavon\Gateway\Request\Remote\FraudBuilder</item>
                <item name="tssinfo" xsi:type="string">Pronko\Elavon\Gateway\Request\Auth\TssInfoBuilder</item>
                <item name="common" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\CommonBuilder</item>
                <item name="order_id" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\OrderIdBuilder</item>
                <item name="amount" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\AmountBuilder</item>
                <item name="comments" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\CommentsBuilder</item>
                <item name="card" xsi:type="string">Pronko\Elavon\Gateway\Request\Auth\CardBuilder</item>
                <item name="autosettle" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\AutoSettleBuilder</item>
            </argument>
        </arguments>
    </virtualType>
    <type name="Pronko\Elavon\Gateway\Request\CaptureStrategyBuilder">
        <arguments>
            <argument name="captureBuilder" xsi:type="object">Pronko\Elavon\Gateway\Request\CaptureRequestBuilder</argument>
            <argument name="settleBuilder" xsi:type="object">Pronko\Elavon\Gateway\Request\SettleRequestBuilder</argument>
            <argument name="multisettleBuilder" xsi:type="object">Pronko\Elavon\Gateway\Request\MultiSettleRequestBuilder</argument>
        </arguments>
    </type>
    <virtualType name="Pronko\Elavon\Gateway\Request\CaptureRequestBuilder" type="Pronko\Elavon\Gateway\Request\RequestBuilder">
        <arguments>
            <argument name="builderComposite" xsi:type="object">Pronko\Elavon\Gateway\Request\Builder\CaptureComposite</argument>
            <argument name="type" xsi:type="string">auth</argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\Gateway\Response\CaptureHandlerChain" type="Magento\Payment\Gateway\Response\HandlerChain">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="card" xsi:type="string">Pronko\Elavon\Gateway\Response\CardHandler</item>
                <item name="transaction" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\AdditionalInfoHandler</item>
                <item name="capture" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\CaptureHandler</item>
                <item name="fraud" xsi:type="string">Pronko\Elavon\Gateway\Response\Remote\FraudHandler</item>
                <item name="transaction_report" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\TransactionReportHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <!-- Auth Command -->
    <virtualType name="Pronko\Elavon\Gateway\Command\AuthCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">
        <arguments>
            <argument name="requestBuilder" xsi:type="object">Pronko\Elavon\Gateway\Request\AuthRequestBuilder</argument>
            <argument name="transferFactory" xsi:type="object">Pronko\Elavon\Gateway\Http\TransferFactory</argument>
            <argument name="client" xsi:type="object">Pronko\Elavon\Gateway\Http\Client</argument>
            <argument name="validator" xsi:type="object">Pronko\Elavon\Gateway\Response\Validator\General</argument>
            <argument name="handler" xsi:type="object">Pronko\Elavon\Gateway\Response\AuthHandlerChain</argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\Gateway\Request\AuthRequestBuilder" type="Pronko\Elavon\Gateway\Request\RequestBuilder">
        <arguments>
            <argument name="builderComposite" xsi:type="object">Pronko\Elavon\Gateway\Request\Builder\CaptureComposite</argument>
            <argument name="type" xsi:type="string">auth</argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\Gateway\Response\AuthHandlerChain" type="Magento\Payment\Gateway\Response\HandlerChain">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="card" xsi:type="string">Pronko\Elavon\Gateway\Response\CardHandler</item>
                <item name="transaction" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\AdditionalInfoHandler</item>
                <item name="auth" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\AuthHandler</item>
                <item name="fraud" xsi:type="string">Pronko\Elavon\Gateway\Response\Remote\FraudHandler</item>
                <item name="transaction_report" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\TransactionReportHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <!-- Void Command -->
    <virtualType name="Pronko\Elavon\Gateway\Command\VoidCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">
        <arguments>
            <argument name="requestBuilder" xsi:type="object">Pronko\Elavon\Gateway\Request\VoidBuilder</argument>
            <argument name="transferFactory" xsi:type="object">Pronko\Elavon\Gateway\Http\TransferFactory</argument>
            <argument name="client" xsi:type="object">Pronko\Elavon\Gateway\Http\Client</argument>
            <argument name="validator" xsi:type="object">Pronko\Elavon\Gateway\Response\Validator\General</argument>
            <argument name="handler" xsi:type="object">Pronko\Elavon\Gateway\Response\VoidHandlerChain</argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\Gateway\Request\VoidBuilder" type="Pronko\Elavon\Gateway\Request\RequestBuilder">
        <arguments>
            <argument name="builderComposite" xsi:type="object">Pronko\Elavon\Gateway\Request\VoidBuilderComposite</argument>
            <argument name="type" xsi:type="string">void</argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\Gateway\Request\VoidBuilderComposite" type="Magento\Payment\Gateway\Request\BuilderComposite">
        <arguments>
            <argument name="builders" xsi:type="array">
                <item name="common" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\CommonBuilder</item>
                <item name="order_id" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\OrderIdBuilder</item>
                <item name="transaction" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\TransactionBuilder</item>
                <item name="void_hash" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\VoidHashBuilder</item>
                <item name="comments" xsi:type="string">Pronko\Elavon\Gateway\Request\Part\CommentsBuilder</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\Gateway\Response\VoidHandlerChain" type="Magento\Payment\Gateway\Response\HandlerChain">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="additional_transaction_info" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\AdditionalInfoHandler</item>
                <item name="void_transaction" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\VoidHandler</item>
                <item name="transaction_report" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\TransactionReportHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="Pronko\Elavon\Gateway\Command\CommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="capture" xsi:type="string">Pronko\Elavon\Gateway\Command\CaptureStrategyCommand</item>
                <item name="capture_command" xsi:type="string">Pronko\Elavon\Gateway\Command\CaptureCommand</item>
                <item name="settle" xsi:type="string">Pronko\Elavon\Gateway\Command\SettleCommand</item>
                <item name="multisettle" xsi:type="string">Pronko\Elavon\Gateway\Command\MultiSettleCommand</item>
                <item name="authorize" xsi:type="string">Pronko\Elavon\Gateway\Command\AuthCommand</item>
                <item name="refund" xsi:type="string">Pronko\Elavon\Gateway\Command\RefundCommand</item>
                <item name="void" xsi:type="string">Pronko\Elavon\Gateway\Command\VoidCommand</item>
                <item name="redirect" xsi:type="string">Pronko\Elavon\Gateway\Command\RedirectCommand</item>
                <item name="initialize" xsi:type="string">Pronko\Elavon\Gateway\Command\InitializeCommand</item>
                <item name="cancel" xsi:type="string">Pronko\Elavon\Gateway\Command\CancelCommand</item>
                <item name="complete" xsi:type="string">Pronko\Elavon\Gateway\Command\CompleteCommand</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Pronko\Elavon\Controller\Redirect\Response">
        <arguments>
            <argument name="commandPool" xsi:type="object">Pronko\Elavon\Gateway\Command\CommandPool</argument>
            <argument name="logger" xsi:type="object">Pronko\Elavon\Logger\Monolog</argument>
        </arguments>
    </type>
    <type name="Pronko\Elavon\Controller\Redirect\GetTransactionData">
        <arguments>
            <argument name="commandPool" xsi:type="object">Pronko\Elavon\Gateway\Command\CommandPool</argument>
        </arguments>
    </type>

    <type name="Pronko\Elavon\Block\Info">
        <arguments>
            <argument name="config" xsi:type="object">Pronko\Elavon\Spi\ConfigInterface</argument>
        </arguments>
    </type>

    <virtualType name="Pronko\Elavon\Model\Method\Adapter" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="string">elavon</argument>
            <argument name="valueHandlerPool" xsi:type="object">Pronko\Elavon\Gateway\Config\ValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">Pronko\Elavon\Gateway\Validator\ValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">Pronko\Elavon\Gateway\Command\CommandPool</argument>
            <argument name="formBlockType" xsi:type="string">Pronko\Elavon\Block\Form\Cc</argument>
            <argument name="infoBlockType" xsi:type="string">Pronko\Elavon\Block\Info</argument>
        </arguments>
    </virtualType>

    <virtualType name="Pronko\Elavon\Gateway\Config\ValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">Pronko\Elavon\Gateway\Config\ConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="Pronko\Elavon\Gateway\Config\ConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">Pronko\Elavon\Spi\ConfigInterface</argument>
        </arguments>
    </virtualType>

    <virtualType name="Pronko\Elavon\Gateway\Validator\ValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">Pronko\Elavon\Gateway\Validator\CountryValidator</item>
                <item name="currency" xsi:type="string">Pronko\Elavon\Gateway\Validator\Currency</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="Pronko\Elavon\Gateway\Validator\CountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">Pronko\Elavon\Spi\ConfigInterface</argument>
        </arguments>
    </virtualType>

    <!-- Transaction Report -->
    <virtualType name="Pronko\Elavon\View\Element\DataProvider\ReportDataProvider" type="Magento\Framework\View\Element\UiComponent\DataProvider\DataProvider">
        <arguments>
            <argument name="reporting" xsi:type="object">Pronko\Elavon\View\Element\DataProvider\Reporting</argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\View\Element\DataProvider\Reporting" type="Magento\Framework\View\Element\UiComponent\DataProvider\Reporting">
        <arguments>
            <argument name="collectionFactory" xsi:type="object">Pronko\Elavon\View\Element\DataProvider\ReportCollectionFactory</argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\View\Element\DataProvider\ReportCollectionFactory" type="Magento\Framework\View\Element\UiComponent\DataProvider\CollectionFactory">
        <arguments>
            <argument name="collections" xsi:type="array">
                <item name="elavon_report_data_source" xsi:type="string">Pronko\Elavon\View\Element\DataProvider\ReportDataSource</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Pronko\Elavon\View\Element\DataProvider\ReportDataSource" type="Magento\Framework\View\Element\UiComponent\DataProvider\SearchResult">
        <arguments>
            <argument name="mainTable" xsi:type="string">pronko_elavon_transaction_report</argument>
            <argument name="resourceModel" xsi:type="string">Pronko\Elavon\Model\ResourceModel\Report\Settlement</argument>
        </arguments>
    </virtualType>

    <type name="Pronko\Elavon\Gateway\Http\Client">
        <arguments>
            <argument name="converter" xsi:type="object">Pronko\Elavon\Gateway\Http\Converter\XmlToArray</argument>
            <argument name="logger" xsi:type="object">Pronko\Elavon\Model\Method\Logger</argument>
        </arguments>
    </type>

    <virtualType name="Pronko\Elavon\Model\Method\Logger" type="Magento\Payment\Model\Method\Logger">
        <arguments>
            <argument name="config" xsi:type="object">Pronko\Elavon\Spi\ConfigInterface</argument>
            <argument name="logger" xsi:type="object">Pronko\Elavon\Logger\Monolog</argument>
        </arguments>
    </virtualType>

    <type name="Magento\Checkout\Model\GuestPaymentInformationManagement">
        <plugin name="elavonGuestPaymentInformationManagement" type="Pronko\Elavon\Plugin\Checkout\GuestPaymentInformationManagementPlugin" />
    </type>

    <!-- Redirect -->
    <type name="Pronko\Elavon\Gateway\Request\Redirect\OrderDataBuilder">
        <arguments>
            <argument name="builder" xsi:type="object">Pronko\Elavon\Gateway\Request\RedirectBuilderComposite</argument>
        </arguments>
    </type>
    <virtualType name="Pronko\Elavon\Gateway\Request\RedirectBuilderComposite" type="Magento\Payment\Gateway\Request\BuilderComposite">
        <arguments>
            <argument name="builders" xsi:type="array">
                <item name="general" xsi:type="string">Pronko\Elavon\Gateway\Request\Redirect\GeneralBuilder</item>
                <item name="address" xsi:type="string">Pronko\Elavon\Gateway\Request\Redirect\AddressBuilder</item>
                <item name="fraud" xsi:type="string">Pronko\Elavon\Gateway\Request\Redirect\FraudBuilder</item>
                <item name="hash" xsi:type="string">Pronko\Elavon\Gateway\Request\Redirect\HashBuilder</item>
            </argument>
        </arguments>
    </virtualType>
    <type name="Pronko\Elavon\Gateway\Command\CompleteCommand">
        <arguments>
            <argument name="updateDetailsCommand" xsi:type="object">Pronko\Elavon\Gateway\Command\UpdateDetailsCommand</argument>
            <argument name="updateOrderCommand" xsi:type="object">Pronko\Elavon\Gateway\Command\UpdateOrderCommand</argument>
        </arguments>
    </type>
    <type name="Pronko\Elavon\Gateway\Command\UpdateDetailsCommand">
        <arguments>
            <argument name="validator" xsi:type="object">Pronko\Elavon\Gateway\Validator\ResponseValidator</argument>
            <argument name="handler" xsi:type="object">Pronko\Elavon\Gateway\Response\RedirectHandlerChain</argument>
        </arguments>
    </type>
    <virtualType name="Pronko\Elavon\Gateway\Response\RedirectHandlerChain" type="Magento\Payment\Gateway\Response\HandlerChain">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="transaction" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\AdditionalInfoHandler</item>
                <item name="payment" xsi:type="string">Pronko\Elavon\Gateway\Response\PaymentInfoHandler</item>
                <item name="fraud" xsi:type="string">Pronko\Elavon\Gateway\Response\Redirect\FraudHandler</item>
                <item name="transaction_report" xsi:type="string">Pronko\Elavon\Gateway\Response\Transaction\TransactionReportHandler</item>
            </argument>
        </arguments>
    </virtualType>
</config>
